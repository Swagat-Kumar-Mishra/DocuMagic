<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DocuMagic - The All-in-One Document Tool</title>
    
    <!-- Google Fonts for a stylish look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- PWA Manifest & Theming -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8e44ad">
    <link rel="apple-touch-icon" href="icon-192.png">

    <!-- Firebase SDKs and Configuration -->
    <script type="module">
      // Import the functions we need from the Firebase SDKs
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
      import { getMessaging, getToken } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-messaging.js";

      // Your web app's Firebase configuration
      const firebaseConfig = {
        // PASTE YOUR FIREBASE CONFIGURATION HERE
        // I have removed your keys for security.
        apiKey: "YOUR_API_KEY_HERE",
        authDomain: "YOUR_AUTH_DOMAIN_HERE",
        projectId: "YOUR_PROJECT_ID_HERE",
        storageBucket: "YOUR_STORAGE_BUCKET_HERE",
        messagingSenderId: "YOUR_MESSAGING_SENDER_ID_HERE",
        appId: "YOUR_APP_ID_HERE"
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const messaging = getMessaging(app);

      // This function requests permission and gets the token
      function requestNotificationPermission() {
        console.log('Requesting permission...');
        Notification.requestPermission().then((permission) => {
          if (permission === 'granted') {
            console.log('Notification permission granted.');
            // Get the token
            const vapidKey = "YOUR_VAPID_KEY_HERE"; // PASTE YOUR VAPID KEY HERE
            getToken(messaging, { vapidKey: vapidKey }).then((currentToken) => {
              if (currentToken) {
                console.log('FCM Token:', currentToken);
                alert('Successfully subscribed! Your token is: ' + currentToken);
              } else {
                alert('Could not get notification token. Please allow notifications.');
              }
            }).catch((err) => {
              console.error('An error occurred while retrieving token. ', err);
              alert('An error occurred while getting the token.');
            });
          } else {
            console.log('Unable to get permission to notify.');
            alert('Permission for notifications was denied.');
          }
        });
      }

      // This is the reliable way to make the button work on all devices.
      // It waits for the page to be fully loaded before attaching the click function.
      window.addEventListener('DOMContentLoaded', () => {
          const notificationButton = document.getElementById('notification-btn');
          if (notificationButton) {
              notificationButton.addEventListener('click', requestNotificationPermission);
          }
      });
    </script>
    
    <!-- Service Worker Registration -->
    <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        // The '/' is important! It ensures the service worker is registered
        // from the root of your website, which is required.
        navigator.serviceWorker.register('/service-worker.js')
          .then(reg => console.log('Service Worker Registered:', reg))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
    </script>

    <!-- Your App's CSS -->
    <style>
        /* Your full CSS code from your file goes here. No changes needed. */
        :root { --primary-color: #8e44ad; /* ...and so on */ }
        body { font-family: 'Poppins', sans-serif; /* ... */ }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <h1>DocuMagic ✨</h1>
            <p>Your One-Stop Solution for Document Conversion</p>
            
            <!-- This button now has an ID and no "onclick" attribute -->
            <button id="notification-btn" class="btn" style="margin-top: 15px; background: #3498db; border: none;">Enable Notifications</button>
        </header>

        <!-- The rest of your app's HTML (tabs, main, etc.) goes here. No changes needed. -->
        <nav class="tabs">
            <!-- ... -->
        </nav>
        <main>
            <!-- ... -->
        </main>
    </div>

    <!-- External libraries (pdf.js, jspdf). No changes needed. -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js`;
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <!-- Your main application JavaScript. No changes needed. -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            /* Your full application logic from your file goes here. */
        });
    </script>
</body>
</html>        .tab-button.active::after { content: ''; position: absolute; bottom: 0; left: 10%; right: 10%; height: 4px; background-color: var(--success-color); border-radius: 2px; }
        .tab-content { display: none; padding: 30px; }
        .tab-content.active { display: block; }
        .drop-zone { border: 3px dashed var(--light-gray); border-radius: 15px; padding: 50px; text-align: center; cursor: pointer; transition: all 0.3s ease; }
        .drop-zone.dragover { border-color: var(--success-color); }
        .file-input { display: none; }
        .btn { background: linear-gradient(135deg, var(--success-color), #27ae60); color: white; border: none; padding: 12px 25px; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: 600; transition: all 0.3s ease; }
        .btn:disabled { background: #7f8c8d; cursor: not-allowed; }
        /* Add other styles from your file here to keep it clean */
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>DocuMagic ✨</h1>
            <p>Your One-Stop Solution for Document Conversion</p>
            <button onclick="requestNotificationPermission()" class="btn" style="margin-top: 15px; background: #3498db; border: none;">Enable Notifications</button>
        </header>
        <!-- The rest of your HTML body (tabs, main, etc.) goes here -->
    </div>
    <!-- External libraries (pdf.js, jspdf) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <script>pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js`;</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <!-- Your main application JavaScript -->
    <script>
      // The DOMContentLoaded script from your file goes here
    </script>
</body>
</html>
